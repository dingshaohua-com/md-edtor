/* ================================================================== */
/*  块级公式                                                           */
/* ================================================================== */

.math-block-container {
  position: relative;
  border: 1px solid transparent;
  border-radius: 8px;
  padding: 12px;
  margin: 12px 0;
  cursor: pointer;
  transition: border-color 0.2s ease, background-color 0.2s ease;
}
.math-block-container:hover {
  background-color: #f8f9fa;
  border-color: #e0e0e0;
}
/* 编辑态 */
.math-block-container.math-editing {
  border-color: #a0c4ff;
  background-color: #f8faff;
  cursor: default;
}

/* 查看区 — KaTeX 渲染结果 */
.math-block-viewer {
  display: flex;
  justify-content: center;
  padding: 8px 0;
  overflow-x: auto;
}
.math-block-viewer .katex-display {
  margin: 0;
}

/* 编辑区 — 代码 */
.math-block-editor {
  background-color: #f5f5f5;
  padding: 10px 12px;
  border-radius: 6px;
  overflow-x: auto;
  margin: 0;
}
.math-block-code {
  outline: none !important;
  border: none !important;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-size: 14px;
  color: #555;
  white-space: pre-wrap;
  word-break: break-all;
}
.math-block-code:focus {
  outline: none !important;
}
.math-block-code * {
  outline: none !important;
  border: none !important;
}

/* 占位符 */
.math-block-placeholder {
  color: #bbb;
  font-style: italic;
  font-size: 14px;
}

/* ================================================================== */
/*  行内公式                                                           */
/* ================================================================== */

.math-inline-wrapper {
  display: inline;
  position: relative;
  cursor: pointer;
  border-radius: 3px;
  transition: background-color 0.15s ease;
}
.math-inline-wrapper:hover {
  background-color: rgba(100, 140, 255, 0.08);
}

/* 渲染区 */
.math-inline-render {
  display: inline;
}
.math-editing .math-inline-render {
  display: none;
}

/* 编辑输入框 — 默认隐藏 */
.math-inline-input {
  display: none;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-size: 0.9em;
  padding: 1px 6px;
  border: 1px solid #a0c4ff;
  border-radius: 4px;
  background: #f0f4ff;
  color: #333;
  outline: none;
  min-width: 60px;
  max-width: 400px;
}
.math-inline-input:focus {
  border-color: #5b8def;
  box-shadow: 0 0 0 2px rgba(91, 141, 239, 0.2);
}
.math-editing .math-inline-input {
  display: inline;
}

/* 占位符 */
.math-inline-placeholder {
  color: #bbb;
  font-style: italic;
  padding: 0 2px;
}

/* ================================================================== */
/*  ProseMirror 选中态覆盖                                              */
/* ================================================================== */

.math-inline-wrapper.ProseMirror-selectednode {
  outline: none;
}
.math-block-container .ProseMirror-selectednode,
.math-block-code .ProseMirror-selectednode,
.math-block-code .selectednode {
  outline: none !important;
  box-shadow: none !important;
}
